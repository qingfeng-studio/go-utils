# go-utils

[![Go Report Card](https://goreportcard.com/badge/github.com/yourname/go-utils)](https://goreportcard.com/report/github.com/yourname/go-utils)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Go Reference](https://pkg.go.dev/badge/github.com/yourname/go-utils.svg)](https://pkg.go.dev/github.com/yourname/go-utils)

`go-utils` æ˜¯ä¸€ä¸ª Go è¯­è¨€çš„é€šç”¨å·¥å…·åº“é›†åˆï¼Œæ—¨åœ¨ä¸º Go å¼€å‘è€…æä¾›ä¸€ç³»åˆ—å¼€ç®±å³ç”¨ã€ç»è¿‡éªŒè¯çš„å¸¸ç”¨åŠŸèƒ½æ¨¡å—ã€‚å®ƒå°è£…äº†æ—¥å¿—ã€HTTP å®¢æˆ·ç«¯ã€æ•°æ®å¤„ç†ã€åŠ å¯†è§£å¯†ç­‰é«˜é¢‘éœ€æ±‚ï¼Œå¸®åŠ©ä½ å¿«é€Ÿæ­å»ºé¡¹ç›®ï¼Œå‡å°‘é‡å¤é€ è½®å­ï¼Œä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚

---

## ğŸ“¦ ç›®å½•ç»“æ„ä¸åŠŸèƒ½ç®€ä»‹

`go-utils` é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹æˆåŒ…ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©æ€§å¯¼å…¥ã€‚

| ç›®å½•/åŒ…å | ä½œç”¨ |
| :--- | :--- |
| **`utils/`** | **æ ¸å¿ƒå·¥å…·åŒ…**ã€‚æä¾›æœ€åŸºç¡€ã€æœ€å¹¿æ³›ä½¿ç”¨çš„é€šç”¨å‡½æ•°ï¼Œå¦‚ç©ºå€¼åˆ¤æ–­ã€é”™è¯¯å¤„ç†ç®€åŒ–ã€ç¯å¢ƒå˜é‡è¯»å–ç­‰ã€‚æ˜¯æ•´ä¸ªåº“çš„â€œé—¨é¢â€ä¹‹ä¸€ã€‚ |
| **`logger/`** | **æ—¥å¿—å°è£…**ã€‚åŸºäº `zap` æ—¥å¿—åº“è¿›è¡Œå°è£…ï¼Œæä¾›ç®€æ´çš„åˆå§‹åŒ–æ¥å£ã€ç»“æ„åŒ–æ—¥å¿—è¾“å‡ºå’Œæ—¥å¿—çº§åˆ«æ§åˆ¶ã€‚è®©ä½ åœ¨é¡¹ç›®ä¸­å¿«é€Ÿé›†æˆé«˜æ€§èƒ½æ—¥å¿—ã€‚ |
| **`httpx/`** | **å¢å¼º HTTP å®¢æˆ·ç«¯**ã€‚æä¾›ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ HTTP å®¢æˆ·ç«¯ï¼Œå†…ç½®è¶…æ—¶æ§åˆ¶ã€è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼ˆå¯é…ç½®ï¼‰ï¼Œå¹¶é¢„ç•™äº†ä¸­é—´ä»¶æ‰©å±•ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€ç†”æ–­ï¼‰ï¼Œç®€åŒ–å¯¹å¤–éƒ¨ API çš„è°ƒç”¨ã€‚ |
| **`sugar/`** | **æ•°æ®ç±»å‹â€œè¯­æ³•ç³–â€**ã€‚æä¾›å¯¹å­—ç¬¦ä¸² (`string`)ã€åˆ‡ç‰‡ (`slice`)ã€æ˜ å°„ (`map`) ç­‰å†…ç½®æ•°æ®ç±»å‹çš„ä¾¿æ·æ“ä½œå‡½æ•°ï¼Œå¦‚ `Join`, `Reverse`, `Map`, `Filter`, `Merge` ç­‰ï¼Œè®©ä»£ç æ›´ç®€æ´æ˜“è¯»ã€‚ |
| **`crypto/ace/`** | **ACE åŠ è§£å¯†**ã€‚æä¾›åŸºäºç‰¹å®šç®—æ³•ï¼ˆæ­¤å¤„æŒ‡ä»£ä½ çš„ `ace` å®ç°ï¼‰çš„åŠ è§£å¯†åŠŸèƒ½ã€‚åŒ…å«åŠ å¯†ã€è§£å¯†ã€å¯†é’¥ç®¡ç†ç­‰æ¥å£ï¼Œç”¨äºä¿æŠ¤æ•æ„Ÿæ•°æ®ã€‚ |
| **`config/`** | **é…ç½®åŠ è½½**ã€‚æ”¯æŒä» YAML æˆ– JSON é…ç½®æ–‡ä»¶ä¸­åŠ è½½é…ç½®ï¼Œå¹¶èƒ½ä¸ç¯å¢ƒå˜é‡ç»“åˆä½¿ç”¨ï¼ˆç¯å¢ƒå˜é‡ä¼˜å…ˆçº§æ›´é«˜ï¼‰ï¼Œæ–¹ä¾¿åœ¨ä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ä¸‹ç®¡ç†åº”ç”¨é…ç½®ã€‚ |
| **`internal/`** | **å†…éƒ¨å®ç°**ã€‚å­˜æ”¾å„æ¨¡å—å…±äº«çš„ã€ä¸å¯¹å¤–æš´éœ²çš„åº•å±‚å®ç°ç»†èŠ‚ã€‚æ­¤ç›®å½•ä¸‹çš„ä»£ç ä»…ä¾› `go-utils` å†…éƒ¨ä½¿ç”¨ã€‚ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…

```bash
go get github.com/yourname/go-utils
```

## ğŸ§ª æµ‹è¯•å‘½ä»¤é€ŸæŸ¥è¡¨

### åŸºç¡€æµ‹è¯•

```bash
# è¿›å…¥loggerç›®å½•
cd logger

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test -v

# è¿è¡Œæµ‹è¯•å¹¶æ˜¾ç¤ºè¦†ç›–ç‡
go test -v -cover

# è¿è¡Œç‰¹å®šæµ‹è¯•
go test -run=TestConcurrentAccess -v

# è¿è¡Œå•å…ƒæµ‹è¯•å¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
go test -v -run=TestLoggerInfo -json

# æ ¹ç›®å½•ç›´æ¥æ‰§è¡ŒæŸä¸ªç›®å½•ä¸‹çš„æµ‹è¯•ç”¨ä¾‹
go test ./logger -v
```

### åŸºå‡†æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰åŸºå‡†æµ‹è¯•
go test -run=^$ -bench=. -benchmem

# è¿è¡Œç‰¹å®šåŸºå‡†æµ‹è¯•
go test -run=^$ -bench=BenchmarkLoggerInfo -benchmem

# å¤šæ¬¡è¿è¡ŒåŸºå‡†æµ‹è¯•
go test -run=^$ -bench=. -benchmem -count=5
```

### è¦†ç›–ç‡æµ‹è¯•

```bash
# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
go test -coverprofile=coverage.out
go tool cover -func=coverage.out

# ç”ŸæˆHTMLè¦†ç›–ç‡æŠ¥å‘Š
go tool cover -html=coverage.out -o coverage.html
open coverage.html  # macOS
```

### æ€§èƒ½åˆ†æ

```bash
# CPUæ€§èƒ½åˆ†æ
go test -run=^$ -bench=. -cpuprofile=cpu.prof
go tool pprof cpu.prof

# å†…å­˜åˆ†æ
go test -run=^$ -bench=. -memprofile=mem.prof
go tool pprof mem.prof
```

### ç«æ€æ£€æµ‹

```bash
# è¿è¡Œç«æ€æ£€æµ‹
go test -race -v

# åŸºå‡†æµ‹è¯• + ç«æ€æ£€æµ‹
go test -run=^$ -bench=. -race
```

### ä¸€é”®æµ‹è¯•è„šæœ¬

åˆ›å»º `test.sh`:

```bash
#!/bin/bash
echo "=== è¿è¡Œæ‰€æœ‰æµ‹è¯• ==="
go test -v

echo -e "\n=== åŸºå‡†æµ‹è¯• ==="
go test -run=^$ -bench=. -benchmem

echo -e "\n=== è¦†ç›–ç‡æŠ¥å‘Š ==="
go test -coverprofile=coverage.out
go tool cover -func=coverage.out

echo -e "\n=== ç«æ€æ£€æµ‹ ==="
go test -race -v

echo "æµ‹è¯•å®Œæˆï¼"
```

ä½¿ç”¨æ–¹æ³•ï¼š
```bash
chmod +x test.sh
./test.sh
```